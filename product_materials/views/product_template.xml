<?xml version="1.0" encoding="UTF-8" ?>
<odoo>

    <record id="product_template_only_form_view" model="ir.ui.view">
        <field name="name">product.template.form.product.materials</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view" />
        <field name="arch" type="xml">
            <notebook position="inside">
                <!-- Show the notebook page only if configuration says materials
                are managed for products and/or packaging -->
                <page
                    string="Materials"
                    groups="product_materials.group_product_template_manage_product_materials,product_materials.group_product_template_manage_product_packaging_materials"
                >
                    <group
                        string="Product Material Compositions"
                        groups="product_materials.group_product_template_manage_product_materials"
                    >
                        <field
                            name="product_material_compositions"
                            context="{'default_type': 'product'}"
                            nolabel="1"
                        >
                            <tree string="Material Compositions" editable="bottom">

                                <field name="product_material_class" />
                                <field
                                    name="product_material_waste_component"
                                    options="{ 'no_create': True }"
                                />
                                <field
                                    name="recycled_percentage"
                                    groups="product_materials.group_product_template_manage_materials_recycling_percentages"
                                />
                                <field
                                    name="product_material"
                                    string="Product Material Name"
                                    domain="[('is_product_material', '=', True), ('product_material_class', '=', product_material_class)]"
                                    options="{ 'no_create': True }"
                                />
                                <field
                                    name="conflict_area_minerals_compliant"
                                    groups="product_materials.group_prod_mat_comp_manage_compliance_conflict_area_minerals"
                                    options="{ 'no_create': True }"
                                />
                                <field
                                    name="halogen_compliant"
                                    groups="product_materials.group_prod_mat_comp_manage_compliance_halogens"
                                    options="{ 'no_create': True }"
                                />
                                <field
                                    name="packaging_materials_checked"
                                    groups="product_materials.group_prod_mat_comp_manage_compliance_packaging_materials"
                                    options="{ 'no_create': True }"
                                />
                                <field name="description" />
                                <field name="type" invisible="1" />

                            </tree>
                        </field>
                    </group>

                    <group
                        string="Product Packaging Material Compositions"
                        groups="product_materials.group_product_template_manage_product_packaging_materials"
                    >
                        <field
                            name="product_packaging_material_compositions"
                            context="{'default_type': 'product_packaging'}"
                            nolabel="1"
                        >
                            <tree string="Material Compositions" editable="bottom">
                                <field
                                    name="product_material_class"
                                    string="Material Class"
                                />
                                <field
                                    name="product_material_waste_component"
                                    options="{ 'no_create': True }"
                                />
                                <field
                                    name="recycled_percentage"
                                    groups="product_materials.group_product_template_manage_materials_recycling_percentages"
                                />
                                <field
                                    name="product_material"
                                    string="Product Packaging Material Name"
                                    domain="[('is_product_packaging_material', '=', True), ('product_material_class', '=', product_material_class)]"
                                    options="{ 'no_create': True }"
                                />
                                <field
                                    name="conflict_area_minerals_compliant"
                                    groups="product_materials.group_prod_mat_comp_manage_compliance_conflict_area_minerals"
                                    options="{ 'no_create': True }"
                                />
                                <field
                                    name="halogen_compliant"
                                    groups="product_materials.group_prod_mat_comp_manage_compliance_halogens"
                                    options="{ 'no_create': True }"
                                />
                                <field
                                    name="packaging_materials_checked"
                                    groups="product_materials.group_prod_mat_comp_manage_compliance_packaging_materials"
                                    options="{ 'no_create': True }"
                                />
                                <field name="description" />
                                <field name="type" invisible="1" />
                            </tree>
                        </field>
                    </group>

                        <!-- <field name="material_purchase_text" /> -->
                </page>
            </notebook>
        </field>
    </record>
</odoo>
